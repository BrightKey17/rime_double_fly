# Rime schema
# encoding: utf-8

schema:
  schema_id: crane_double_fly
  name: å®šåˆ¶åŒé£ğŸ‘
  version: "2023.07.07"
  author:
    - Brightkey <brightzone@qq.com>
  description: |
    - è¶…å¼ºç‰¹æ€§
    - å¯é€‰å››é”®è‡ªåŠ¨ä¸Šå±?
  dependencies:
    - luna_pinyin
    - stroke

switches:
  #  - name: full_shape
  #    reset: 0
  #    states: [ åŠ ,å…¨ ]
  #  - options: ["utf8", "gbk", "gb2312"] # å­—ç¬¦é›†é€‰å•
  #    reset: 0 # é»˜è®¤ UTF8
  #    states:
  #      - UTF-8
  #      - GBK
  #      - GB2312

engine:                    # è¼¸å…¥å¼•æ“è¨­å®šï¼Œå³æ›æ¥çµ„ä»¶çš„ã€Œè™•æ–¹ã€
  processors:              # ä¸€ã€é€™æ‰¹çµ„ä»¶è™•ç†å„é¡æŒ‰éµæ¶ˆæ¯
    - ascii_composer       # â€» è™•ç†è¥¿æ–‡æ¨¡å¼åŠä¸­è¥¿æ–‡åˆ‡æ›
    - recognizer           # â€» èˆ‡ matcher æ­é…ï¼Œè™•ç†ç¬¦åˆç‰¹å®šè¦å‰‡çš„è¼¸å…¥ç¢¼ï¼Œå¦‚ç¶²å€ã€åæŸ¥ç­‰
    - key_binder           # â€» åœ¨ç‰¹å®šæ¢ä»¶ä¸‹å°‡æŒ‰éµç¶å®šåˆ°å…¶ä»–æŒ‰éµï¼Œå¦‚é‡å®šç¾©é€—è™Ÿã€å¥è™Ÿçˆ²å€™é¸ç¿»é éµ
    - speller              # â€» æ‹¼å¯«è™•ç†å™¨ï¼Œæ¥å—å­—ç¬¦æŒ‰éµï¼Œç·¨è¼¯è¼¸å…¥ç¢¼
    - punctuator           # â€» å¥è®€è™•ç†å™¨ï¼Œå°‡å–®å€‹å­—ç¬¦æŒ‰éµç›´æ¥æ˜ å°„çˆ²æ–‡å­—ç¬¦è™Ÿ
    - selector             # â€» é¸å­—è™•ç†å™¨ï¼Œè™•ç†æ•¸å­—é¸å­—éµã€ä¸Šã€ä¸‹å€™é¸å®šä½ã€æ›é éµ
    - navigator            # â€» è™•ç†è¼¸å…¥æ¬„å…§çš„å…‰æ¨™ç§»å‹•éµ
    - express_editor       # â€» ç·¨è¼¯å™¨ï¼Œè™•ç†ç©ºæ ¼ã€å›è»Šä¸Šå±ã€å›é€€éµç­‰
      #- fluid_editor         # â€» å¥å¼ç·¨è¼¯å™¨ï¼Œç”¨æ–¼ä»¥ç©ºæ ¼æ–·è©ã€å›è»Šä¸Šå±çš„ã€æ³¨éŸ³ã€‘ã€ã€èªå¥æµã€‘ç­‰è¼¸å…¥æ–¹æ¡ˆï¼Œ
                           #   æ›¿æ› express_editorï¼Œä¹Ÿå¯ä»¥å¯«ä½œ fluency_editor
  segmentors:              # äºŒã€é€™æ‰¹çµ„ä»¶è­˜åˆ¥ä¸åŒå…§å®¹é¡å‹ï¼Œå°‡è¼¸å…¥ç¢¼åˆ†æ®µ
    - ascii_segmentor      # â€» æ¨™è­˜è¥¿æ–‡æ®µè½
    - matcher              # â€» æ¨™è­˜ç¬¦åˆç‰¹å®šè¦å‰‡çš„æ®µè½ï¼Œå¦‚ç¶²å€ã€åæŸ¥ç­‰
    - abc_segmentor        # â€» æ¨™è­˜å¸¸è¦çš„æ–‡å­—æ®µè½
    - affix_segmentor@luna_lookup
    - affix_segmentor@stroke_lookup
    - affix_segmentor@reverse_lookup
    - punct_segmentor      # â€» æ¨™è­˜å¥è®€æ®µè½,åŠ ä¸Štag:punct
    - fallback_segmentor   # â€» æ¨™è­˜å…¶ä»–æœªæ¨™è­˜æ®µè½
  translators:             # ä¸‰ã€é€™æ‰¹çµ„ä»¶ç¿»è­¯ç‰¹å®šé¡å‹çš„ç·¨ç¢¼æ®µçˆ²ä¸€çµ„å€™é¸æ–‡å­—
    - table_translator     # â€» ç¢¼è¡¨ç¿»è­¯å™¨ï¼Œç”¨æ–¼å€‰é ¡ã€äº”ç­†ç­‰åŸºæ–¼ç¢¼è¡¨çš„è¼¸å…¥æ–¹æ¡ˆï¼Œæ›¿æ› script_translator
    - reverse_lookup_translator  # â€» åæŸ¥ç¿»è­¯å™¨ï¼Œç”¨å¦ä¸€ç¨®ç·¨ç¢¼æ–¹æ¡ˆæŸ¥ç¢¼
    - script_translator@luna_lookup
    - script_translator@luna_reserve_lookup
    - table_translator@stroke_lookup
    - table_translator@stroke_reverse_lookup
    - lua_translator@date_translator
    - lua_translator@time_translator
    - punct_translator     # â€» è½‰æ›æ¨™é»ç¬¦è™Ÿ
  filters:                 # å››ã€é€™æ‰¹çµ„ä»¶éæ¿¾ç¿»è­¯çš„çµæœ
    - simplifier           # â€» ç¹ç°¡è½‰æ›
    - uniquifier           # â€» éæ¿¾é‡è¤‡çš„å€™é¸å­—ï¼Œæœ‰å¯èƒ½ä¾†è‡ªç¹ç°¡è½‰æ›
    # - reverse_lookup_filter@luna_reverse_lookup
    # - reverse_lookup_filter@stroke_reverse_lookup
    
speller:
  alphabet: 'zyxwvutsrqponmlkjihgfedcba*#'
  #initials: ';'
  #finals: '#'
  delimiter: " '"
  max_code_length: 4
  auto_select: true #é¡¶å­—ä¸Šå±
  auto_select_pattern: ^\w{4}$
  auto_select_unique_candidate: true
  auto_clear: max_length
  algebra:
    - erase/^az$/
    - derive/^([jqxy])u(.*)$/$1v$2/
    - derive/^(\w\w)\w(\w).?$/$1*$2/ 
    - derive/^(\w\w)\w(\w).?$/$1#$2/ 
    - xform/^(.{4})[-*]$/$1/ #transformation 
    - abbrev/^(\w\w).?$/$1/
    - xlit/QWRTYUIOPSDFGHJKLZXCVBNM/qwrtyuiopsdfghjklzxcvbnm/ #transliterationè½¬å†™
    # åŒæ‹¼éŸ³èŠ‚åˆ‡åˆ†ã€‚å¦‚æœä¸è®¾ç½®åªèƒ½ä¸¥æ ¼æŒ‰ç…§ç è¡¨è¾“å‡º
    # å¦‚æœä¸è¯¥é¡¹ï¼Œè¾“å…¥ã€Œxlã€å°†ä¸ä¼šå‡ºç°ã€Œé¡¹ã€
    - fuzz/^(\w\w)(\w\w).?$/$1/
    #- fuzz/^(\w\w)(\w)\w.+/$1$2/

translator:
  dictionary: &crane crane8105
  prism: crane8105
  spelling_hints: 5  
  enable_completion: true # ç¼–ç æç¤ºå¼€å…³
  enable_charset_filter: false
  enable_user_dict: true
# ä¸æƒ³è‡ªå‹•èª¿é »çš„è©±ï¼Œå°‡ä¸Šæ¢ä¸­ã€Œtrueã€æ”¹çˆ²ã€Œfalseã€
  enable_sentence: false
  sentence_over_completion: false
  enable_encoder: false
# ä¸æƒ³è‡ªå‹•çµ„è©ã€”è¨˜éŒ„è¼¸å…¥éçš„è©ï¼Œç„¶å¾Œè®Šæˆäº”ç¢¼å›ºå®šè©ã€•çš„è©±å¯ä»¥æŠŠä¸Šæ¢ä¸­ã€Œtrueã€æ”¹çˆ²ã€Œfalseã€
  encode_commit_history: true
  preedit_format:
    - xform/([jqxy])v.*/$1u.*/

reverse_lookup:
  tag: reverse_lookup
  prefix: "`"
  suffix: "'"
  tips: åæŸ¥reverse_lookup
  overwrite_comment: false  # è¦†è“‹å…¶ä»–æç¤º
  comment_format: 
    - xform/^/ğŸ§¬/
    - xform/$//
  extra_tags:
    - luna_lookup
    - stroke_lookup

luna_lookup:
  tag: luna_lookup
  dictionary: luna_pinyin
  prefix: "L" # ç¨ç”¨æ¼¢èªã€”å¤§å¯«ã€•ã€ŒLã€
  suffix: "'"
  enable_completion: true
  overwrite_comment: false  # è¦†è“‹å…¶ä»–æç¤º
  tips: æ˜æœˆLunar
  closing_tips: æ˜æœˆLunar
  initial_quality: 1	# èª¿æ•´è©²ç·¨è­¯å™¨å‡ºå­—å„ªå…ˆåº¦
  comment_format: 
    - xform/^/^/
    - xform/$/$/

luna_reverse_lookup:
  tags: [ luna_lookup ]
  dictionary: *crane
  enable_completion: true
  overwrite_comment: false  # è¦†è“‹å…¶ä»–æç¤º
  comment_format: 
    - xform/^/^/
    - xform/$/$/

stroke_lookup:
  tag: stroke_lookup
  dictionary: stroke
  enable_completion: true
  prefix: "S"
  suffix: "'"
  tips: ç¬”ç”»stroke
  overwrite_comment: false  # è¦†è“‹å…¶ä»–æç¤º
  preedit_format:
    - xlit/hspnz/ä¸€ä¸¨ä¸¿ä¸¶ä¹™/
  comment_format:
    - xform/([nl])v/$1Ã¼/

stroke_reverse_lookup:
  tags: [ stroke_lookup ]
  dictionary: crane8105
  overwrite_comment: false  # è¦†è“‹å…¶ä»–æç¤º
  comment_format: 
    - xform/^/^/
    - xform/$/$/

punctuator:
  import_preset: default

key_binder:
  import_preset: default

recognizer:
  import_preset: default
  patterns:
    reverse_lookup: "`[a-z]*'?$"
    stroke_lookup: "S[a-z]*'?$"
    luna_lookup: "L[a-z]*'?$"
    punct:  "^(\/[a-zA-Z]+|\/[0-9]|[^0-9a-zA-Z]$)"

